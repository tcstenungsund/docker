#----------------------------------------------------------------------#  
#                                                                      #  
#  ██████████                                            ████          #  
# ░░███░░░░███                                          ░░███          #  
#  ░███   ░░███ ████████  █████ ████ ████████   ██████   ░███          #  
#  ░███    ░███░░███░░███░░███ ░███ ░░███░░███ ░░░░░███  ░███          #  
#  ░███    ░███ ░███ ░░░  ░███ ░███  ░███ ░███  ███████  ░███          #  
#  ░███    ███  ░███      ░███ ░███  ░███ ░███ ███░░███  ░███          #  
#  ██████████   █████     ░░████████ ░███████ ░░████████ █████         #  
# ░░░░░░░░░░   ░░░░░       ░░░░░░░░  ░███░░░   ░░░░░░░░ ░░░░░          #  
#                                    ░███                              #  
#                                    █████                             #  
#                                   ░░░░░                              #   
#----------------------------------------------------------------------#  
# 
# A docker-compose file for installing Drupal, MariaDB and Adminer  
# 
# IMPORTANT!
#
# 1) 
# Change XX to the version of Drupal you need  
# (ie: 11 for Drupal 11 and 8 for Drupal 8)  
# 
# 2) 
# Change PROJECT_NAME to the name of the project you are initiating  
# 
# 3) 
# Change the login details for the SQL database  
#
# 4) 
# Create the folders themes and modules in your project directory  
# 
# 5) 
# Now you can initiate the file with  
# docker compose up -d 
# 
# 
# Access via "http://localhost:8080" and the local  
# directories ./themes, ./modules and ./db  
#

services:

  drupal:
    image: drupal:XX-apache
    container_name: drupal-PROJECT_NAME
    ports:
      - "8080:80"
    restart: always
    volumes:
      - type: bind
        source: ./themes
        target: /var/www/html/themes
      - type: bind
        source: ./modules
        target: /var/www/html/modules

  adminer:
    container_name: adminer-PROJECT_NAME
    image: adminer
    restart: always
    ports:
      - "8081:8080"
    environment:
      - ADMINER_DEFAULT_SERVER=mariadb-PROJECT_NAME

  mariadb:
    image: mariadb
    container_name: mariadb-PROJECT_NAME
    stop_grace_period: 30s
    working_dir: /host
    volumes:
      - ./db:/host
    environment:
      - MYSQL_ROOT_PASSWORD=root_password
      - MYSQL_DATABASE=my_database_name
      - MYSQL_USER=username
      - MYSQL_PASSWORD=user_password 
    restart: always
